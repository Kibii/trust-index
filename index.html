<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Trust Index – Prototype</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f7;
      color: #111827;
    }
    header {
      padding: 1.5rem 2rem;
      background: #0f172a;
      color: white;
      box-shadow: 0 2px 4px rgba(15, 23, 42, 0.3);
      position: sticky;
      top: 0;
      z-index: 10;
    }
    header h1 {
      margin: 0;
      font-size: 1.4rem;
    }
    header p {
      margin: 0.2rem 0 0;
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .page-section {
      padding: 1.5rem 2rem 0.5rem;
    }

    .panel {
      background: white;
      border-radius: 12px;
      padding: 1.25rem;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.1);
      margin-bottom: 1.5rem;
    }
    .panel h2 {
      margin: 0 0 0.75rem;
      font-size: 1.1rem;
    }
    .panel p {
      margin: 0 0 0.75rem;
      font-size: 0.9rem;
      color: #4b5563;
    }

    /* Matrix */
    .matrix-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
      margin-top: 0.75rem;
    }
    .matrix-table th,
    .matrix-table td {
      padding: 0.45rem 0.4rem;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
      vertical-align: top;
    }
    .matrix-table th {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      color: #6b7280;
    }
    .matrix-domain {
      font-weight: 600;
      color: #111827;
    }

    /* Availability pills */
    .availability-pill {
      display: inline-flex;
      align-items: center;
      padding: 0.12rem 0.45rem;
      border-radius: 999px;
      font-size: 0.75rem;
    }
    .avail-yes {
      background: #dcfce7;
      color: #166534;
    }
    .avail-partial {
      background: #fef9c3;
      color: #854d0e;
    }
    .avail-none {
      background: #fee2e2;
      color: #b91c1c;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      font-size: 0.7rem;
      padding: 0.1rem 0.45rem;
      border-radius: 999px;
      background: #e5e7eb;
      color: #374151;
      margin: 0 0.25rem 0.25rem 0;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }

    .badge-safety { background: #fee2e2; color: #b91c1c; }
    .badge-bias { background: #e0f2fe; color: #1d4ed8; }
    .badge-privacy { background: #ede9fe; color: #5b21b6; }
    .badge-reliability { background: #ecfdf3; color: #166534; }
    .badge-transparency { background: #fef3c7; color: #92400e; }
    .badge-access { background: #f3e8ff; color: #6b21a8; }
    .badge-flourish { background: #e0f2fe; color: #0369a1; }

    /* Two-column layout for updates + model view */
    .two-column {
      display: grid;
      grid-template-columns: 1.1fr 1.3fr;
      gap: 1.5rem;
    }
    @media (max-width: 960px) {
      .two-column {
        grid-template-columns: 1fr;
      }
    }

    .updates-list {
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 420px;
      overflow-y: auto;
    }
    .update-item {
      padding: 0.75rem 0;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
    }
    .update-item:last-child {
      border-bottom: none;
    }
    .update-model {
      font-weight: 600;
      font-size: 0.9rem;
    }
    .update-meta {
      font-size: 0.8rem;
      color: #6b7280;
    }
    .update-text {
      font-size: 0.9rem;
      color: #374151;
    }

    .model-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .model-pill {
      padding: 0.4rem 0.7rem;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      cursor: pointer;
      font-size: 0.83rem;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }
    .model-pill span {
      font-weight: 500;
    }
    .model-pill.active {
      background: #0f172a;
      color: white;
      border-color: #0f172a;
    }
    .model-pill small {
      font-size: 0.75rem;
      opacity: 0.85;
    }

    .model-meta {
      font-size: 0.85rem;
      color: #6b7280;
      margin-bottom: 0.5rem;
    }
    .coverage-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
      margin-top: 0.75rem;
    }
    .coverage-table th,
    .coverage-table td {
      padding: 0.45rem 0.4rem;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
      vertical-align: top;
    }
    .coverage-table th {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      color: #6b7280;
    }
    .coverage-cat {
      font-weight: 600;
      color: #111827;
    }

    .timeline {
      margin-top: 1rem;
      font-size: 0.85rem;
      border-top: 1px solid #e5e7eb;
      padding-top: 0.75rem;
    }
    .timeline h3 {
      margin: 0 0 0.5rem;
      font-size: 0.9rem;
    }
    .timeline-item {
      margin-bottom: 0.5rem;
    }
    .timeline-item strong {
      display: block;
      font-size: 0.83rem;
    }
    .timeline-item span {
      font-size: 0.8rem;
      color: #6b7280;
    }
    .timeline-item p {
      margin: 0.15rem 0 0;
      font-size: 0.85rem;
      color: #374151;
    }

    /* Domain cards */
    .domain-cards {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1rem;
    }
    @media (max-width: 1100px) {
      .domain-cards {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    @media (max-width: 768px) {
      .domain-cards {
        grid-template-columns: 1fr;
      }
    }
    .domain-card {
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      padding: 0.9rem 0.9rem 0.75rem;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }
    .domain-title {
      font-size: 0.95rem;
      font-weight: 600;
      color: #0f172a;
    }
    .domain-subtitle {
      font-size: 0.8rem;
      color: #6b7280;
      margin-bottom: 0.25rem;
    }
    .domain-badges {
      margin-bottom: 0.35rem;
    }
    .domain-models {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.2rem;
    }
    .domain-model-pill {
      border-radius: 999px;
      padding: 0.22rem 0.5rem;
      font-size: 0.75rem;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      border: 1px solid #e5e7eb;
      background: white;
    }
    .domain-model-name {
      font-weight: 500;
      color: #111827;
    }
    .domain-model-provider {
      font-size: 0.72rem;
      color: #6b7280;
    }
    .domain-meta {
      font-size: 0.75rem;
      color: #6b7280;
      margin-top: 0.2rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Trust Index – Prototype</h1>
    <p>
      A curated overview of AI Benchmarks for trust &amp; safety teams and regulators:
      the latest evaluation benchmarks and standards, who is using them, and where evidence is missing.
    </p>
  </header>

  <!-- Top: Evaluation landscape matrix -->
  <section class="page-section">
    <section class="panel">
      <h2>Trustworthy AI Evaluation Landscape – At a Glance</h2>
      <p>
        This matrix highlights key evaluation domains, example benchmarks and standards, and where
        major models currently have public evidence (sample data).
      </p>
      <div id="matrix-container"></div>
    </section>
  </section>

  <!-- Middle: Domain cards -->
  <section class="page-section">
    <section class="panel">
      <h2>Evaluation Domains – What to Use, Where Gaps Are</h2>
      <p>
        Each domain aggregates relevant benchmarks and standards and shows which models report evaluations.
        This helps AI teams and regulators decide <em>what</em> to evaluate next and <em>where</em> additional
        reporting is needed.
      </p>
      <div class="domain-cards" id="domain-cards"></div>
    </section>
  </section>

  <!-- Bottom: Updates + per-model coverage -->
  <section class="page-section">
    <div class="two-column">
      <section class="panel">
        <h2>Recent Evidence Updates</h2>
        <p>Trust- and wellbeing-relevant disclosures and evaluations across models.</p>
        <ul class="updates-list" id="updates"></ul>
      </section>

      <section class="panel">
        <h2>Model Evidence Coverage & Timeline</h2>
        <p>Select a model to view its evidence coverage and timeline.</p>
        <div class="model-list" id="model-list"></div>
        <div id="model-details"></div>
      </section>
    </div>
  </section>

  <script>
    // Sample data 
    const data = {
      models: [
        {
          id: "gpt-4-1",
          name: "GPT-4.1",
          provider: "OpenAI",
          lastUpdated: "2025-08-02",
          status: "Active",
          coverage: [
            {
              category: "Human Flourishing & Wellbeing",
              key: "flourishing",
              availability: "partial",
              lastUpdate: "2025-07-10",
              independence: "Partial",
              notes: "Evaluated on Flourishing AI Benchmark (selected domains); limited public reporting."
            },
            {
              category: "Safety & Harm Reduction",
              key: "safety",
              availability: "yes",
              lastUpdate: "2025-06-15",
              independence: "Partial",
              notes: "System card and safety overview; internal red-teaming summary."
            },
            {
              category: "Bias & Fairness",
              key: "bias",
              availability: "partial",
              lastUpdate: "2025-05-10",
              independence: "Partial",
              notes: "Selective reporting on demographic bias; limited detail on methods."
            },
            {
              category: "Privacy & Data Governance",
              key: "privacy",
              availability: "partial",
              lastUpdate: "2025-04-20",
              independence: "No",
              notes: "High-level data provenance statements; no formal leakage evaluation published."
            },
            {
              category: "Reliability & Truthfulness",
              key: "reliability",
              availability: "yes",
              lastUpdate: "2025-08-02",
              independence: "Yes",
              notes: "Evaluated in HELM update; TruthfulQA and hallucination benchmarks reported."
            },
            {
              category: "Transparency & Versioning",
              key: "transparency",
              availability: "yes",
              lastUpdate: "2025-06-15",
              independence: "Partial",
              notes: "System card with change log and high-level limitations."
            },
            {
              category: "Independent Evaluation & Access",
              key: "access",
              availability: "partial",
              lastUpdate: "2025-08-02",
              independence: "Yes",
              notes: "Evaluated in external benchmarks; constrained but present researcher access."
            }
          ],
          timeline: [
            {
              date: "2025-08-02",
              type: "Reliability",
              categoryKey: "reliability",
              summary: "HELM benchmark update reports GPT-4.1 performance on TruthfulQA and robustness tasks.",
              source: "Stanford HELM"
            },
            {
              date: "2025-07-10",
              type: "Flourishing",
              categoryKey: "flourishing",
              summary: "Initial Flourishing AI Benchmark (FAI) run published for GPT-4.1 on selected wellbeing domains.",
              source: "Independent research group"
            },
            {
              date: "2025-06-15",
              type: "Safety",
              categoryKey: "safety",
              summary: "OpenAI publishes GPT-4.1 system card describing red-teaming and harm mitigation.",
              source: "OpenAI"
            },
            {
              date: "2025-04-20",
              type: "Privacy",
              categoryKey: "privacy",
              summary: "Updated data use and provenance statement for GPT-4.1.",
              source: "OpenAI"
            }
          ]
        },
        {
          id: "claude-3-5-sonnet",
          name: "Claude 3.5 Sonnet",
          provider: "Anthropic",
          lastUpdated: "2025-09-10",
          status: "Active",
          coverage: [
            {
              category: "Human Flourishing & Wellbeing",
              key: "flourishing",
              availability: "partial",
              lastUpdate: "2025-08-05",
              independence: "Yes",
              notes: "Evaluated on HumaneBench (psychological safety) and empathy-focused benchmarks; limited FAI reporting."
            },
            {
              category: "Safety & Harm Reduction",
              key: "safety",
              availability: "yes",
              lastUpdate: "2025-09-10",
              independence: "Yes",
              notes: "Evaluated in a government-led frontier model safety pilot; strong focus on dangerous capabilities."
            },
            {
              category: "Bias & Fairness",
              key: "bias",
              availability: "yes",
              lastUpdate: "2025-05-20",
              independence: "Partial",
              notes: "Provider bias and fairness evaluation summary using BBQ-style questions and custom scenarios."
            },
            {
              category: "Privacy & Data Governance",
              key: "privacy",
              availability: "partial",
              lastUpdate: "2025-04-30",
              independence: "No",
              notes: "High-level statements on training data and redaction; limited formal leakage testing disclosed."
            },
            {
              category: "Reliability & Truthfulness",
              key: "reliability",
              availability: "partial",
              lastUpdate: "2025-06-05",
              independence: "Partial",
              notes: "Selected benchmarks on truthfulness and hallucination; methods partially described."
            },
            {
              category: "Transparency & Versioning",
              key: "transparency",
              availability: "yes",
              lastUpdate: "2025-04-30",
              independence: "Partial",
              notes: "Detailed model card with limitations and change log."
            },
            {
              category: "Independent Evaluation & Access",
              key: "access",
              availability: "yes",
              lastUpdate: "2025-09-10",
              independence: "Yes",
              notes: "Participated in external frontier safety evaluation; controlled access for research partners."
            }
          ],
          timeline: [
            {
              date: "2025-09-10",
              type: "Safety",
              categoryKey: "safety",
              summary: "Government AI safety institute publishes frontier model evaluation including Claude 3.5.",
              source: "Gov AI Safety Institute"
            },
            {
              date: "2025-08-05",
              type: "Flourishing",
              categoryKey: "flourishing",
              summary: "HumaneBench results released for Claude 3.5, focusing on psychological wellbeing and emotional safety.",
              source: "Independent research group"
            },
            {
              date: "2025-06-05",
              type: "Reliability",
              categoryKey: "reliability",
              summary: "Anthropic shares selected truthfulness and hallucination benchmark results.",
              source: "Anthropic"
            },
            {
              date: "2025-05-20",
              type: "Bias",
              categoryKey: "bias",
              summary: "Bias and fairness evaluation summary released for Claude 3.5.",
              source: "Anthropic"
            },
            {
              date: "2025-04-30",
              type: "Transparency",
              categoryKey: "transparency",
              summary: "Claude 3.5 model card published with training overview and limitations.",
              source: "Anthropic"
            }
          ]
        },
        {
          id: "gemini-2-0",
          name: "Gemini 2.0",
          provider: "Google DeepMind",
          lastUpdated: "2025-07-18",
          status: "Active",
          coverage: [
            {
              category: "Human Flourishing & Wellbeing",
              key: "flourishing",
              availability: "none",
              lastUpdate: "",
              independence: "No",
              notes: "No public flourishing- or wellbeing-specific evaluations reported."
            },
            {
              category: "Safety & Harm Reduction",
              key: "safety",
              availability: "partial",
              lastUpdate: "2025-07-18",
              independence: "Partial",
              notes: "Safety overview with qualitative red-teaming results; limited quantitative detail."
            },
            {
              category: "Bias & Fairness",
              key: "bias",
              availability: "partial",
              lastUpdate: "2025-05-01",
              independence: "No",
              notes: "Internal bias assessments summarized; methods not fully disclosed."
            },
            {
              category: "Privacy & Data Governance",
              key: "privacy",
              availability: "partial",
              lastUpdate: "2025-05-15",
              independence: "No",
              notes: "High-level privacy and data handling statements; no formal leakage benchmarks reported."
            },
            {
              category: "Reliability & Truthfulness",
              key: "reliability",
              availability: "yes",
              lastUpdate: "2025-07-18",
              independence: "Yes",
              notes: "Evaluated in external benchmark suites, including truthfulness and reasoning tasks."
            },
            {
              category: "Transparency & Versioning",
              key: "transparency",
              availability: "partial",
              lastUpdate: "2025-05-01",
              independence: "No",
              notes: "Basic model documentation; change log limited."
            },
            {
              category: "Independent Evaluation & Access",
              key: "access",
              availability: "partial",
              lastUpdate: "2025-07-18",
              independence: "Yes",
              notes: "Participates in limited external evaluations; research access available by application."
            }
          ],
          timeline: [
            {
              date: "2025-07-18",
              type: "Safety / Reliability",
              categoryKey: "reliability",
              summary: "External benchmark suite reports Gemini 2.0 results on multiple reasoning and truthfulness tasks.",
              source: "External benchmark group"
            },
            {
              date: "2025-05-15",
              type: "Privacy",
              categoryKey: "privacy",
              summary: "Updated privacy and data use overview for Gemini models.",
              source: "Google DeepMind"
            },
            {
              date: "2025-05-01",
              type: "Transparency / Bias",
              categoryKey: "transparency",
              summary: "Gemini 2.0 documentation updated with limited bias and safety details.",
              source: "Google DeepMind"
            }
          ]
        }
      ]
    };

    // Domain definitions: what benchmarks and standards belong where
    const domainDefinitions = {
      flourishing: {
        key: "flourishing",
        label: "Human Flourishing & Wellbeing",
        description:
          "Evaluations of models' impact on wellbeing, relationships, psychological safety, and human flourishing outcomes.",
        benchmarks: [
          "Flourishing AI Benchmark (FAI)",
          "HumaneBench",
          "Empathy / relational support evaluations"
        ],
        standards: ["IEEE 7010 (Well-being)", "Wellbeing-aligned governance frameworks"]
      },
      safety: {
        key: "safety",
        label: "Safety & Harm Reduction",
        description:
          "Dangerous capabilities, misuse, abuse resistance, red-teaming, and safety institute evaluations.",
        benchmarks: [
          "Government frontier model evaluations",
          "ARC Evals / red-teaming suites",
          "Safety stress tests"
        ],
        standards: ["NIST AI RMF", "ISO/IEC 42001", "Emerging safety guidelines"]
      },
      bias: {
        key: "bias",
        label: "Bias & Fairness",
        description:
          "Demographic bias, stereotyping, differential performance across groups.",
        benchmarks: ["BBQ", "CrowS-Pairs", "StereoSet"],
        standards: ["EU AI Act fairness provisions", "Anti-discrimination law"]
      },
      privacy: {
        key: "privacy",
        label: "Privacy & Data Governance",
        description:
          "Data provenance, leakage, membership inference, retention and access controls.",
        benchmarks: ["PII leakage tests", "Membership inference evaluations"],
        standards: ["GDPR", "CCPA", "Data minimization and retention policies"]
      },
      reliability: {
        key: "reliability",
        label: "Reliability & Truthfulness",
        description:
          "Hallucination behavior, factuality, consistency, robustness under distribution shift.",
        benchmarks: ["TruthfulQA", "HELM robustness / reliability suites"],
        standards: ["Internal reliability thresholds", "Risk & quality management"]
      },
      transparency: {
        key: "transparency",
        label: "Transparency & Versioning",
        description:
          "Model and system cards, changelogs, limitation statements, documented behavioral shifts.",
        benchmarks: ["Model card completeness", "System card depth"],
        standards: ["Documentation best practices", "Transparency commitments"]
      },
      access: {
        key: "access",
        label: "Independent Evaluation & Access",
        description:
          "Whether independent researchers and public-interest institutions can meaningfully evaluate the model.",
        benchmarks: ["External audits", "Research access programs"],
        standards: ["DSA / EU AI Act access provisions", "Responsible disclosure norms"]
      }
    };

    const badgeClassForDomain = (key) => {
      switch (key) {
        case "safety": return "badge badge-safety";
        case "bias": return "badge badge-bias";
        case "privacy": return "badge badge-privacy";
        case "reliability": return "badge badge-reliability";
        case "transparency": return "badge badge-transparency";
        case "access": return "badge badge-access";
        case "flourishing": return "badge badge-flourish";
        default: return "badge";
      }
    };

    const availClass = (availability) => {
      if (availability === "yes") return "availability-pill avail-yes";
      if (availability === "partial") return "availability-pill avail-partial";
      return "availability-pill avail-none";
    };

    const availLabel = (availability) => {
      if (availability === "yes") return "Evidence";
      if (availability === "partial") return "Partial";
      return "None";
    };

    // ---- MATRIX ----
    function renderMatrix() {
      const container = document.getElementById("matrix-container");
      const models = data.models;

      // Collect all domain keys actually present
      const domainKeys = Object.keys(domainDefinitions);

      const headerRow = `
        <tr>
          <th>Domain</th>
          <th>Key Benchmarks</th>
          <th>Key Standards / Policy</th>
          ${models.map((m) => `<th>${m.name}<br/><span style="font-weight:400;font-size:0.75rem;color:#6b7280;">${m.provider}</span></th>`).join("")}
        </tr>
      `;

      const rows = domainKeys.map((key) => {
        const def = domainDefinitions[key];
        const domainLabel = def?.label || key;
        const benchmarks = (def?.benchmarks || []).join(", ");
        const standards = (def?.standards || []).join(", ");

        const cells = models.map((model) => {
          const cov = model.coverage.find((c) => c.key === key);
          const availability = cov ? cov.availability : "none";
          const lastUpdate = cov?.lastUpdate || "—";
          return `
            <td>
              <span class="${availClass(availability)}">${availLabel(availability)}</span><br/>
              <span style="font-size:0.75rem;color:#6b7280;">Updated: ${lastUpdate}</span>
            </td>
          `;
        }).join("");

        return `
          <tr>
            <td class="matrix-domain">${domainLabel}</td>
            <td style="font-size:0.8rem;color:#374151;">${benchmarks || "—"}</td>
            <td style="font-size:0.8rem;color:#374151;">${standards || "—"}</td>
            ${cells}
          </tr>
        `;
      }).join("");

      container.innerHTML = `
        <table class="matrix-table">
          <thead>${headerRow}</thead>
          <tbody>${rows}</tbody>
        </table>
      `;
    }

    // ---- DOMAIN CARDS ----
    function renderDomainCards() {
      const container = document.getElementById("domain-cards");
      const domainMap = {};

      data.models.forEach((model) => {
        model.coverage.forEach((cov) => {
          const key = cov.key;
          if (!domainMap[key]) {
            const def = domainDefinitions[key] || {};
            domainMap[key] = {
              key,
              label: def.label || cov.category,
              description: def.description || "",
              benchmarks: def.benchmarks || [],
              standards: def.standards || [],
              models: []
            };
          }
          domainMap[key].models.push({
            modelId: model.id,
            name: model.name,
            provider: model.provider,
            availability: cov.availability,
            lastUpdate: cov.lastUpdate
          });
        });
      });

      const domains = Object.values(domainMap);

      container.innerHTML = domains.map((d) => {
        const benchmarkBadges = d.benchmarks.map((b) => `<span class="badge">${b}</span>`).join("");
        const standardBadges = d.standards.map((s) => `<span class="badge">${s}</span>`).join("");

        const modelPills = d.models.map((m) => {
          const availabilityLabel = availLabel(m.availability);
          const availabilityClass = availClass(m.availability);
          return `
            <div class="domain-model-pill">
              <span class="domain-model-name">${m.name}</span>
              <span class="domain-model-provider">${m.provider}</span>
              <span class="${availabilityClass}" style="font-size:0.7rem;">${availabilityLabel}</span>
            </div>
          `;
        }).join("");

        const total = d.models.length;
        const fullCount = d.models.filter((m) => m.availability === "yes").length;
        const partialCount = d.models.filter((m) => m.availability === "partial").length;
        const noneCount = d.models.filter((m) => m.availability === "none").length;

        return `
          <article class="domain-card">
            <div>
              <div class="domain-title">${d.label}</div>
              <div class="domain-subtitle">${d.description}</div>
            </div>
            <div class="domain-badges">
              ${benchmarkBadges}
              ${standardBadges}
            </div>
            <div class="domain-models">
              ${modelPills}
            </div>
            <div class="domain-meta">
              <span>Total models: ${total}</span> ·
              <span>Full: ${fullCount}</span> ·
              <span>Partial: ${partialCount}</span> ·
              <span>None: ${noneCount}</span>
            </div>
          </article>
        `;
      }).join("");
    }

    // ---- UPDATES FEED ----
    function renderUpdates() {
      const updatesEl = document.getElementById("updates");
      const allEvents = [];

      data.models.forEach((model) => {
        model.timeline.forEach((event) => {
          allEvents.push({
            modelId: model.id,
            modelName: model.name,
            provider: model.provider,
            date: event.date,
            type: event.type,
            categoryKey: event.categoryKey,
            summary: event.summary,
            source: event.source
          });
        });
      });

      allEvents.sort((a, b) => (a.date < b.date ? 1 : -1));

      updatesEl.innerHTML = allEvents.map((ev) => {
        return `
          <li class="update-item">
            <div class="update-model">
              ${ev.modelName} <span style="font-weight:400;color:#6b7280">· ${ev.provider}</span>
            </div>
            <div class="update-meta">
              <span class="${badgeClassForDomain(ev.categoryKey)}">${ev.type}</span>
              <span>${ev.date} · ${ev.source}</span>
            </div>
            <div class="update-text">
              ${ev.summary}
            </div>
          </li>
        `;
      }).join("");
    }

    // ---- MODEL LIST + DETAILS ----
    function renderModelList(activeId) {
      const listEl = document.getElementById("model-list");
      listEl.innerHTML = data.models.map((m) => {
        const isActive = m.id === activeId;
        return `
          <button class="model-pill ${isActive ? "active" : ""}" data-id="${m.id}">
            <span>${m.name}</span>
            <small>(${m.provider})</small>
          </button>
        `;
      }).join("");

      Array.from(listEl.querySelectorAll(".model-pill")).forEach((btn) => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-id");
          renderModelList(id);
          renderModelDetails(id);
        });
      });
    }

    function renderModelDetails(modelId) {
      const model = data.models.find((m) => m.id === modelId);
      const container = document.getElementById("model-details");
      if (!model) {
        container.innerHTML = "<p>No model selected.</p>";
        return;
      }

      const rows = model.coverage.map((c) => {
        return `
          <tr>
            <td class="coverage-cat">${c.category}</td>
            <td>
              <span class="${availClass(c.availability)}">${availLabel(c.availability)}</span><br/>
              <span style="font-size:0.8rem;color:#6b7280;">Last update: ${c.lastUpdate || "—"}</span>
            </td>
            <td>
              <span style="font-size:0.8rem;color:#6b7280;">Independence: ${c.independence}</span><br/>
              <span style="font-size:0.85rem;color:#374151;">${c.notes}</span>
            </td>
          </tr>
        `;
      }).join("");

      const timelineItems = model.timeline
        .sort((a, b) => (a.date < b.date ? 1 : -1))
        .map((t) => {
          return `
            <div class="timeline-item">
              <strong>${t.date} · ${t.type}</strong>
              <span>${t.source}</span>
              <p>${t.summary}</p>
            </div>
          `;
        }).join("");

      container.innerHTML = `
        <div>
          <div class="model-meta">
            <strong>${model.name}</strong> · ${model.provider}<br/>
            Last evidence update recorded: ${model.lastUpdated} · Status: ${model.status}
          </div>
          <table class="coverage-table">
            <thead>
              <tr>
                <th>Category</th>
                <th>Evidence</th>
                <th>Details</th>
              </tr>
            </thead>
            <tbody>${rows}</tbody>
          </table>

          <div class="timeline">
            <h3>Evidence Timeline</h3>
            ${timelineItems || "<p>No evidence items recorded yet.</p>"}
          </div>
        </div>
      `;
    }

    // ---- INIT ----
    (function init() {
      renderMatrix();
      renderDomainCards();
      renderUpdates();
      const defaultModelId = data.models[0]?.id;
      renderModelList(defaultModelId);
      renderModelDetails(defaultModelId);
    })();
  </script>
</body>
</html>
